#+Title: Numbers of SICK

The code used is

#+BEGIN_SRC lisp
  (ql:quickload :cl-ppcre)
  (ql:quickload :alexandria)

  (defun read-file (filename)
    (with-open-file (in filename)
      (do ((res nil)
	   (header t)
	   (line (read-line in nil nil)
		 (read-line in nil nil)))
	  ((null line)
	   (reverse res))
	(if (not header)
	    (push (cl-ppcre:split "\\t" line) res)
	    (setf header nil)))))

  (defun fix-sentence (s)
    (if (equal #\. (char s (1- (length s))))
	s
	(format nil "~a." s)))

  (defun stats (alist &key (cols '(1 2 7 8)))
    (let ((tab (make-hash-table :test #'equal)))
      (dolist (line alist (alexandria:hash-table-alist tab))
	(dolist (col cols)
	  (incf (gethash (fix-sentence (nth col line)) tab 0))))))


  (defun save-sentences (filename stats)
    (with-open-file (out filename :direction :output :if-exists :supersede)
      (dolist (v stats)
	(format out "\"~a\",~a~%" (car v) (cdr v)))))
#+END_SRC

Taking all sentences into account. The pair of sentences compared for
entailment and the original sentences used to produce the pair.

#+BEGIN_SRC lisp :exports both
(length (stats (read-file "SICK.txt")))
#+END_SRC

#+RESULTS:
: 7899

Considering only the two sentences being compared in each line:

#+BEGIN_SRC lisp :exports both
(length (stats (read-file "SICK.txt") :cols '(1 2)))
#+END_SRC

#+RESULTS:
: 6076

If we consider only the original sentences:

#+BEGIN_SRC lisp :exports both
(length (stats (read-file "SICK.txt") :cols '(7 8)))
#+END_SRC

#+RESULTS:
: 1909

We have basically 7899 distinct sentences in SICK corpus. The corpus
has 10000 pairs of sentences, each pair has also the two original
sentences used to produce the pair. I am taking the 4 sentences of
each line to count the distinct sentences of the corpus. Not all
sentences finish with dot, @fcbr is fixing it before the
analysis. Below the list of the 100 sentences more frequent.

#+name: tab
#+BEGIN_SRC lisp :results table :exports both
  (subseq (mapcar (lambda (pair) (list (car pair) (cdr pair)))
		  (sort (stats (read-file "SICK.txt")) #'> :key #'cdr))
	  0 150)
#+END_SRC

#+RESULTS: tab
| A man is playing a guitar.                                                           | 105 |
| a man is playing a guitar.                                                           |  91 |
| a man is dancing.                                                                    |  57 |
| a man is playing a flute.                                                            |  56 |
| A woman is peeling a potato.                                                         |  50 |
| A man is playing the guitar.                                                         |  47 |
| A man is dancing.                                                                    |  46 |
| The man is playing the guitar.                                                       |  41 |
| a man is playing the guitar.                                                         |  37 |
| A man is playing a flute.                                                            |  37 |
| A man is driving a car.                                                              |  36 |
| A man is riding a horse.                                                             |  35 |
| A woman is riding a horse.                                                           |  35 |
| a woman is dancing.                                                                  |  31 |
| A man is playing guitar.                                                             |  31 |
| a woman is slicing an onion.                                                         |  30 |
| a woman is peeling a potato.                                                         |  29 |
| A man is riding a motorcycle.                                                        |  28 |
| A man is playing a piano.                                                            |  28 |
| a man is playing the drums.                                                          |  27 |
| A woman is cutting an onion.                                                         |  27 |
| a surfer rides the wave.                                                             |  26 |
| a man is singing and playing a guitar.                                               |  26 |
| a man is riding a motorcycle.                                                        |  26 |
| a woman is cutting an onion.                                                         |  25 |
| a man is climbing a rope.                                                            |  25 |
| A man is climbing a rope.                                                            |  25 |
| a man is riding a horse.                                                             |  24 |
| A woman is slicing a tomato.                                                         |  24 |
| A man is playing soccer.                                                             |  23 |
| A woman is slicing tofu.                                                             |  22 |
| A man is playing a keyboard.                                                         |  22 |
| a man is walking along a path through wilderness.                                    |  21 |
| the man is slicing a potato.                                                         |  21 |
| A woman is slicing a potato.                                                         |  21 |
| two men are fighting.                                                                |  20 |
| the rhino grazed on the grass.                                                       |  20 |
| a man is exercising.                                                                 |  20 |
| a man is playing a harp.                                                             |  20 |
| a monkey pratices martial arts.                                                      |  20 |
| a man is slicing potato.                                                             |  20 |
| A man is cutting an onion.                                                           |  20 |
| A man is playing a trumpet.                                                          |  20 |
| A man is speaking on a stage.                                                        |  20 |
| A sea turtle is hunting for fish.                                                    |  20 |
| Various people are eating at red tables in a crowded restaurant with purple lights.  |  20 |
| the man is exercising.                                                               |  19 |
| a woman is riding a horse.                                                           |  19 |
| a man is playing a violin.                                                           |  19 |
| A woman is slicing an onion.                                                         |  19 |
| a man is riding a mechanical bull.                                                   |  19 |
| a woman is playing an electric guitar.                                               |  19 |
| a man is speaking.                                                                   |  19 |
| a woman is slicing a carrot.                                                         |  19 |
| Someone is playing a piano.                                                          |  19 |
| A woman is cutting broccoli.                                                         |  19 |
| A man is spitting.                                                                   |  19 |
| A man is playing flute.                                                              |  19 |
| a brown dog jumps in the air.                                                        |  18 |
| a man is cutting an onion.                                                           |  18 |
| someone is playing a piano.                                                          |  18 |
| a boy is looking at a calendar.                                                      |  18 |
| a man is kicking a soccer ball.                                                      |  18 |
| a baby is crawling happily.                                                          |  18 |
| a woman is chopping garlic.                                                          |  18 |
| the woman is pencilling on eye shadow.                                               |  18 |
| a woman is boiling noodles in water.                                                 |  18 |
| the man is dancing.                                                                  |  18 |
| a little girl is playing a grand piano on stage.                                     |  18 |
| a boy is playing a guitar.                                                           |  18 |
| A man is slicing a tomato.                                                           |  18 |
| A man is opening a package containing headphones.                                    |  18 |
| Five children are standing in front of a wooden hut.                                 |  18 |
| a girl is styling her hair.                                                          |  17 |
| a man is cutting a potato.                                                           |  17 |
| a man is playing the piano.                                                          |  17 |
| a man is riding a bicycle.                                                           |  17 |
| A woman is putting on makeup.                                                        |  17 |
| A girl is playing a flute.                                                           |  17 |
| A man is talking.                                                                    |  17 |
| A person is chopping an onion.                                                       |  17 |
| a man puts some cheese on a pizza.                                                   |  16 |
| a man is playing an electronic keyboard.                                             |  16 |
| the two men did a funny skit with a boxer in front of a crowd of people.             |  16 |
| a man is eating a banana.                                                            |  16 |
| A horse is standing.                                                                 |  16 |
| A woman is brushing her feet.                                                        |  16 |
| A man is mowing a lawn.                                                              |  16 |
| A woman is slicing a carrot.                                                         |  16 |
| A laughing child is holding a water gun and getting sprayed with water.              |  16 |
| a dog with a brindle-colored coat is running across the yard.                        |  15 |
| A man is playing the drums.                                                          |  15 |
| a man is slicing potatoes.                                                           |  15 |
| The man is driving a white car.                                                      |  15 |
| The little girl is putting her hair into a pony tail.                                |  15 |
| A boy is playing the piano.                                                          |  15 |
| A woman is playing the flute.                                                        |  15 |
| A man is playing two keyboards.                                                      |  15 |
| A man is chopping butter into a container.                                           |  15 |
| A woman is talking on a telephone.                                                   |  15 |
| A dog and a red ball in the air.                                                     |  15 |
| a snowboarder jumps into the air.                                                    |  15 |
| A frightened little boy on a climbing wall.                                          |  15 |
| a child is playing with a water spout outdoors while the rest of his family watches. |  14 |
| a little girl swings, a woman stands behind her.                                     |  14 |
| one man is climbing a rock wall, while another man, below, holds a rope.             |  14 |
| a bmx bike rider in a black and red uniform on a dirt bike.                          |  14 |
| A surfer is riding the wave.                                                         |  14 |
| a brown and black dog runs through the leaves.                                       |  14 |
| a white birds lands swiftly in the water.                                            |  14 |
| the military officer barked at the recruits.                                         |  14 |
| a monkey is teasing a dog at the zoo.                                                |  14 |
| the doctor was helping the patient.                                                  |  14 |
| A man is cutting a potato.                                                           |  14 |
| the woman picked up the kangaroo.                                                    |  14 |
| a woman picks up a baby kangaroo.                                                    |  14 |
| swimmers are racing in a lake.                                                       |  14 |
| a man is walking in the rain.                                                        |  14 |
| four young men stand still as a car explodes behind them.                            |  14 |
| a man plays a guitar.                                                                |  14 |
| a man is standing on a roof top playing a violin.                                    |  14 |
| a woman is lying on a blanket on a rock and reading a book.                          |  14 |
| the lady sliced up the meat.                                                         |  14 |
| someone is banging a camera lense against a nail.                                    |  14 |
| two kids push an inflatable crocodile around in a pool.                              |  14 |
| two kids are playing in a swimming pool with a green colored crocodile float.        |  14 |
| the man set up his camera to take sunset pictures at the beach.                      |  14 |
| The cat is drinking milk.                                                            |  14 |
| A cat is licking from a saucer of milk.                                              |  14 |
| A man is slicing a carrot by a machine.                                              |  14 |
| A woman is beating two eggs in a bowl using a wire whisk.                            |  14 |
| A cat is playing with an antenna.                                                    |  14 |
| A man is throwing knives at a tree.                                                  |  14 |
| A man is playing on a guitar and singing.                                            |  14 |
| A woman is putting oil into a skillet.                                               |  14 |
| Five kittens are eating out of five dishes.                                          |  14 |
| A parrot is talking into a microphone.                                               |  14 |
| The cook is slicing bell peppers.                                                    |  14 |
| A lion is walking.                                                                   |  14 |
| A man is pressing microwave buttons.                                                 |  14 |
| A woman is riding an elephant.                                                       |  14 |
| A man is holding a frog.                                                             |  14 |
| A man is emptying a plastic container.                                               |  14 |
| The man poured oil on the cut tomatoes.                                              |  14 |
| A woman beats two eggs in a bowl.                                                    |  14 |
| A person is mixing ingredients in a bowl.                                            |  14 |
| A man is picking up a tree.                                                          |  14 |
| A man is carrying a tree.                                                            |  14 |
| The men are performing on stage.                                                     |  14 |
| A woman is cutting some flowers.                                                     |  14 |

The complete list is in the file =numbers.sentences=:

#+BEGIN_SRC lisp
(save-sentences "numbers.sentences" (stats (read-file "SICK.txt")))
#+END_SRC

Sentences with more occurrences are 'original' sentences very reused
and sentences repeated in the corpus. The following table shows the
histogram of the frequency of occurrences. 

1. The sentence "a man is playing a guitar" is repeated in the corpus
   105 plus 91 times. 

2. We have 27 sentences that occurs only one time in the corpus.

#+BEGIN_SRC R  :exports both
  data <- read.csv("numbers.sentences", header=FALSE)
  table(data$V2)
#+END_SRC

#+RESULTS:
|   1 |   27 |
|   2 | 3914 |
|   3 |  215 |
|   4 |   50 |
|   5 | 1029 |
|   6 |  500 |
|   7 |  210 |
|   8 |   52 |
|   9 |  959 |
|  10 |  381 |
|  11 |   72 |
|  12 |  163 |
|  13 |  124 |
|  14 |  100 |
|  15 |   13 |
|  16 |    9 |
|  17 |    8 |
|  18 |   15 |
|  19 |   12 |
|  20 |   11 |
|  21 |    3 |
|  22 |    2 |
|  23 |    1 |
|  24 |    2 |
|  25 |    3 |
|  26 |    3 |
|  27 |    2 |
|  28 |    2 |
|  29 |    1 |
|  30 |    1 |
|  31 |    2 |
|  35 |    2 |
|  36 |    1 |
|  37 |    2 |
|  41 |    1 |
|  46 |    1 |
|  47 |    1 |
|  50 |    1 |
|  56 |    1 |
|  57 |    1 |
|  91 |    1 |
| 105 |    1 |

